!function(e){function t(t){for(var o,a,i=t[0],l=t[1],c=t[2],u=0,p=[];u<i.length;u++)a=i[u],r[a]&&p.push(r[a][0]),r[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(d&&d(t);p.length;)p.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(o=!1)}o&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},r={0:0},s=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var d=l;s.push([0,1]),n()}({"./appConfig.json":function(e){e.exports={a:"SSR"}},"./src/app.js":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/react/index.js"),r=n.n(o),s=n("./node_modules/react-dom/index.js"),a=n.n(s),i=n("./node_modules/react-loadable/lib/index.js"),l=n.n(i),c=n("./node_modules/@babel/runtime/regenerator/index.js"),d=n.n(c),u=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),p=n.n(u),f=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),m=n.n(f),b=n("./node_modules/@babel/runtime/helpers/createClass.js"),_=n.n(b),j=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),h=n.n(j),v=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),g=n.n(v),y=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),w=n.n(y),x=n("./node_modules/@babel/runtime/helpers/inherits.js"),O=n.n(x),S=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),E=n.n(S),C=n("./node_modules/axios/index.js"),T=n.n(C),k=n("./node_modules/react-toastify/lib/index.js"),P=(n("./node_modules/react-toastify/dist/ReactToastify.css"),n("./node_modules/react-hot-loader/root.js")),M=n("./node_modules/react-json-tree/lib/index.js"),R=n.n(M),V=n("./node_modules/query-string/index.js"),I=n.n(V),J=(n("./src/components/AppRoot.scss"),{}),q=function(e){function t(e){var n;return m()(this,t),n=h()(this,g()(t).call(this,e)),E()(w()(n),"informOutside",function(e){try{console.log("window",window),console.log("HTMLIFrameElement",HTMLIFrameElement),(window.opener||HTMLIFrameElement.contentWindow).postMessage(e,"*")}catch(e){}}),E()(w()(n),"getJD",p()(d.a.mark(function e(){var t,o;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T()({method:"POST",url:"/api/ims/profile/position",data:{header:{},request:{c:"",m:"",p:{jd_id:J.jd_id,job_func:J.job_func,plc_id:J.plc_id,work_dura:J.work_dura,session:J.session}}}});case 2:t=e.sent,n.responseValidate(t),o=t.data.response.results,n.informOutside(o),console.log("JD 数据",o.jd),console.log("岗位画像数据",o.position_profile),n.setState({jd:o.jd,position:o.position_profile});case 9:case"end":return e.stop()}},e)}))),E()(w()(n),"getCV",p()(d.a.mark(function e(){var t,o;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T()({method:"POST",url:"/api/ims/profile/talent",data:{header:{},request:{c:"",m:"",p:{cv_id:J.cv_id,session:J.session}}}});case 2:t=e.sent,n.responseValidate(t),o=t.data.response.results,n.informOutside(o),console.log("CV 数据",t.cv),console.log("人才画像数据",t.talent_profile),n.setState({cv:o.cv,talent:o.talent_profile});case 9:case"end":return e.stop()}},e)}))),E()(w()(n),"responseValidate",function(e){var t=e.data;if(!t)throw n.setState({error:!0}),Object(k.toast)("服务端响应数据为空"),new Error("服务端响应数据为空");var o=t.response;if(!o)throw n.setState({error:!0}),Object(k.toast)("响应对象无 response 域"),new Error("响应对象无 response 域");var r=o.err_msg;if(0!==o.err_no)throw n.setState({error:!0}),Object(k.toast)("服务端给出的 err_msg: ".concat(r)),new Error("服务端给出的 err_msg: ".concat(r))}),E()(w()(n),"getContent",function(){var e=n.state,t=e.error,o=e.position;return t?"加载出错，请稍后重试":o?r.a.createElement(R.a,{data:o}):"Loading..."}),n.state={jd:null,position:null,cv:null,talent:null,error:!1},n}return O()(t,e),_()(t,[{key:"componentDidMount",value:function(){var e=I.a.parse(location.search);console.log("query string parsed",e),e.session;var t=e.jd_id,n=(e.job_func,e.plc_id,e.work_dura,e.cv_id);J=e,t?this.getJD():n?this.getCV():(this.setState({error:!0}),Object(k.toast)("未收到 cv_id 或 jd_id"))}},{key:"render",value:function(){return this.state.position,r.a.createElement("div",null,this.getContent(),r.a.createElement(k.ToastContainer,null))}}]),t}(r.a.Component),D=Object(P.hot)(q),L=n("./appConfig.json");l.a.preloadReady().then(function(){var e="SSR"===L.a?"hydrate":"render";a.a[e](r.a.createElement(D,null),document.getElementById("react-root"))})},"./src/clientEntry.js":function(e,t,n){"use strict";n.r(t),n("./src/index.scss"),n("./node_modules/bootstrap/dist/js/bootstrap.js"),n("./node_modules/@babel/register/lib/index.js"),n("./src/app.js"),console.log("Environment is ".concat("production"))},"./src/components/AppRoot.scss":function(e,t,n){},"./src/index.scss":function(e,t,n){},0:function(e,t,n){n("./node_modules/font-awesome/scss/font-awesome.scss"),e.exports=n("./src/clientEntry.js")}});
//# sourceMappingURL=main.5e3b06c4e04e5a705f2b.js.map